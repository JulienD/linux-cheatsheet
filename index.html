<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Linux, commandes fondamentales</title>
    <link href='http://fonts.googleapis.com/css?family=Chelsea+Market|Dancing+Script' rel='stylesheet' type='text/css'>  
	  <link rel="stylesheet" href="css/style.css" type="text/css">
</head>
<body>


  <div class="block block-title">
    <h1>Linux - commandes fondamentales</h1>
    <h3>Un petit guide pour bien démarrer avec Linux.</h3>
    <ul class="navlist">
      <li><a href="#ls">ls</a></li>                                
      <li><a href="#cd">cd</a></li> 
      <li><a href="#mv">mv</a></li>
      <li><a href="#rm">rm</a></li>
    </ul>      
    <ul class="navlist">
      <li><a href="#mkdir">mkdir</a></li>           
      <li><a href="#chmod">chmod</a></li>
      <li><a href="#chown">chown</a></li>  
    </ul>      
    <ul class="navlist">
      <li><a href="#packages">Paquets</a></li>
      <li><a href="#process">Processus</a></li>
      <li><a href="#archives">Archives</a></li>
    </ul>      
    <ul class="navlist">
      <li><a href="#ssh">ssh</a></li>
      <li><a href="#rsync">rsync</a></li>    
      <li><a href="#sed">sed</a></li>
      <li><a href="#grep">grep</a></li>
      <li><a href="#find">find</a></li>                                               
    </ul> 
    <img alt="" src="img/arrow.png">
  </div>

  <a name="ls"></a>
  <div class="block block-ls dark">
    <h2>ls</h2>
    <h4>La commande <strong><i>ls</i></strong> permet d'afficher le contenu d'un répertoire.</h4>
    <p><code>ls -l</code> Afficher les informations de manière détaillée.</p>
    <p><code>ls -a</code> Afficher les fichiers cachés.</p>
    <p><code>ls -h</code> Afficher la taille des fichiers de facon lisible.</p>
    <p><code>ls -r</code> Tri inversé.</p>
    <p><code>ls -t</code> Trier les fichiers par date du plus récent au plus ancien.</p>
    <p><code>ls -S</code> Trier par taille décroissante.</p>
    <p><code>ls -la</code> Afficher toutes informations des fichiers cachés ou non.</p>
    <p><code>ls -lhS</code> Afficher toutes informations des fichiers, avec des tailles lisible le tout ordonné du plus grand au plus petit.</p>
  </div>

  <a name="cd"></a>
  <div class="block block-cd white">
    <h2>cd</h2>
    <h4>La navigation d’un répertoire à un autre s’effectue avec la commande <strong><i>cd</i></strong> succédé du nom du répertoire</h4>
    <p><code>cd /</code> Permet de se retrouver à la racine du disque.</p>
    <p><code>cd /home/</code> ou <code>cd ~</code> Acceder directement au répertoire de l’utilisateur.</p>
    <p><code>cd /var/www/</code> Aller dans le repertoire /var/www.</p>
    <p><code>cd ..</code> Remonter dans le répertoire parent à partir de la ou vous êtes.</p>
    <p><code>cd -</code> Permet de revenir au répertoire précédent.</p>
    <p><code>pwd</code> Renvoyer le chemin absolu du répertoire courant ce qui est utile puisqu’en général le shell n’affiche que le nom du répertoire courant.</p>
  </div>
  
  <a name="cp"></a>
  <div class="block block-cp dark">
    <h2>cp</h2>
    <h4>Pour créer une copie d’un fichier on utilise la commande <strong><i>cp</i></strong>.</h4>
    <p><code>cp foo/bar.txt baz/bar.txt</code> Copie le fichier bar.txt dans le répertoire baz.<p>
    <p><code>cp -r foo/ baz/</code>Copier des répertoires entiers (recursively).</p>
  </div>
  
  <a name="mv"></a>
  <div class="block block-mv white">
    <h2>mv</h2>
    <h4>Déplacer un fichier est aussi simple que de le copier, pour cela il faut utiliser la commande <strong><i>mv</i></strong>. Cette commande permet aussi de renommer vos fichiers</h4> 
    <p><code>mv foo/bar.txt baz/bar.txt</code> Déplacer le fichier bar.txt dans le répertoire baz.</p>
    <p><code>mv foo_bar.txt foo_baz.txt</code> Renommer le fichier foo_bar.txt en foo_baz.txt.</p>
  </div>
  
  <a name="rm"></a>
  <div class="block block-rm dark">
    <h2>rm</h2>
    <h4>Pour effacer un fichier ou un répertoire on utilise la commande <strong><i>rm</i></strong>.</h4>
    <p><code>*.txt</code> Supprimer tous les fichiers ayant pour extension txt.</p>
    <p><code>rm foo.txt bar.txt</code> Supprime les fichiers foo.txt et bar.txt.</p>
    <p><code>rm -rf baz/</code> Supprime tous les fichiers contenu dans le répertoire baz.</p>
  </div>

  <a name="mkdir"></a>
  <div class="block block-mkdir white">
    <h2>mkdir</h2>
    <h4>Pour créer un répertoire il suffit d’utiliser la commande <strong><i>mkdir</i></strong>. Celle-ci vous permettra de créer un répertoire à l’emplacement ou vous vous trouvez ou à l’emplacement précisé en argumente de la commande.</h4>
    <p><code>mkdir -v</code> Retourne un message pour chaque répertoire crées.</p>
    <p><code>mkdir -p</code> Cette option permet de créer une arborescence complète.</p>
    <p><code>mkdir foo</code> Création du répertoire foo.</p>
    <p><code>mkdir -v foo /tmp/bar</code> Création des répertoires foo et /tmp/bar.</p>
    <p><code>mkdir -p foo/bar/baz</code> Création de l’arborescence foo/bar/baz.</p>
  </div>

  <a name="chown"></a>
  <div class="block block-chown dark">
    <h2>chmod</h2>
    <h4>La commande <strong><i>chown</i></strong> permet de changer le propriétaire d'un fichier ou répertoire.</h4>
    <p><code>chown bob:admin foo.txt</code> Attribut le fichier foo.txt à l’utilisateur bob et au groupe admin.</p>
  </div>

  <a name="chmod"></a>
  <div class="block block-chmod white">
    <h2>chown</h2>
    <h4>La commande <strong><i>chown</i></strong> permet de changer le propriétaire d'un fichier ou répertoire. Pour executer cette commande vous devez etre le propriétaire du fichier ou etre logué en root.</h4>
    <p>Methode alphanumérique</p>
    <p><code>chmod u+w fichier</code> Ajouter les droits en écriture au propriétaire (user, write)</p>
    <p><code>chmod g+r fichier</code> Ajouter les droits en lecture au groupe du fichier (group, read)</p>
    <p><code>chmod o-x fichier</code> Supprimer les droits d'execution aux autres utilisateurs (other, execution)</p>
    <p><code>chmod a+rw dossier</code> Ajouter les droits lecture / écriture à tous (all)</p>
    <p><code>chmod -R a+rx files</code> Ajouter les droits en lecture et en exécution à tout ce que contient le repertoire dossier.</p>

    <p>Methode octale</p>
    <p><code>chmod 764 dossier</code> Tous les droits pour le propriétaire (7xx), lecture et ecriture pour le groupe (x6x) et lecture uniquement pour les autres (xx4).</p>
    <p><code>chmod -R 755 dossier</code> Donner au propriétaire tous les droits (7xx), alors que seul les droits de lecture et d'accès seront donné au autres (x55). Grace à l'option -R ces droits seront appliqués à tous les fichiers et dossier contenu dans ce repertoire.</p>

    <table><tbody>
      <tr><th colspan="3">Correspondances de représentation des droits</th></tr>
      <tr><th>Droit</th><th>Valeur alphanumérique</th><th>Valeur octale</th></tr>
      <tr><td>aucun droit</td><td align="center">---</td><td align="center">0</td></tr>
      <tr><td>exécution seulement</td><td align="center">--x</td><td align="center">1</td></tr>
      <tr><td>écriture seulement</td><td align="center">-w-</td><td align="center">2</td></tr>
      <tr><td>ecriture et exécution</td><td align="center">-wx</td><td align="center">3</td></tr>
      <tr><td>lecture seulement</td><td align="center">r--</td><td align="center">4</td></tr>
      <tr><td>lecture et exécution</td><td align="center">r-x</td><td align="center">5</td></tr>
      <tr><td>lecture et écriture</td><td align="center">rw-</td><td align="center">6</td></tr>
      <tr><td>tous les droits (lecture, écriture et exécution)</td><td align="center">rwx</td><td align="center">7</td></tr>
    </tbody></table>
  </div>


  <a name="packages"></a>
  <div class="block block-packages dark">
    <h2>Packages</h2>
    <h4>L'installation et la désinstallation de paquets peut se faire grâce à la commande <strong><i>apt</i></strong>.</h4>
    <p><code>apt-get update</code> Mettre à jour la liste des fichiers disponibles dans les dépôts APT.</p>
    <p><code>apt-get install samba</code> Installer du paquet Samba.</p>
    <p><code>apt-getp install foo=2.2-1</code> Installer du paquet foo dans sa version 2.2-1.</p>
    <p><code>apt-get remove samba</code> Désinstallation du paquet Samba tout en laissant les fichiers de configurations.</p>
    <p><code>apt-get purge samba</code> Suppression complète du paquet Samba et de ses fichiers de configuration.</p>
    <p><code>apt-cache policy php5</code> Récupération d'informations sur l'état du paquet php5</p>
    <p><code>dpkg -l | grep php</code> Lister tous les paquets php installés sur la machine</p>
  </div>

  <a name="ssh"></a>
  <div class="block block-ssh white">
    <h2>ssh</h2>
    <h4>La commande <strong><i>ssh</i></strong> permet de se connecter de façon sécurisé à une machine distante.</h4>
    <p><code>ssh john@remotehost.example.com</code> Connexion à la machine distante avec le login john.</p>
    <p><code>ssh -l john remotehost.example.com</code> Equivaut à la commande précédente.</p>
    <p><code>ssh-keygen -t dsa</code> Génération d'une clé DSA (à faire sur la machine locale).</p>
    <p><code>ssh-copy-id -i ~/.ssh/id_dsa.pub john@remotehost.example.com</code> Copie de la clé publique sur la machine distante.</p>
  </div>

  <a name="scp"></a>
  <div class="block block-scp dark">
    <h2>scp</h2>
    <h4>La commande <strong><i>scp</i></strong> permet de copier des fichiers entre le serveur et le client ssh d’une manière sécurisée.</h4>
    <p><code>scp foo.txt john@remotehost.example.com</code> Transfert le fichier foo.txt situé dans le répertoire courant vers le home du compte john de la machine remotehost.example.com.</p>   
    <p><code>scp john@remotehost.example.com:foo.txt</code> Récupère le fichier foo.txt situé dans le home du répertoire du compte john pour le copier dans le repertoire courant.</p>
    <p><code>scp john@remotehost.example.com:/backups/*.sql backups/</code> Récupère tous les fichiers .sql situé dans le répertoire backups pour le copier dans le sous-repertoire backups.</p>
    <p><code>scp -r mails/ john@remotehost.example.com/mails</code> Transfert l'intégralité du répertoire mails vers la machine remotehost.example.com.</p>
  </div>

  <a name="rsync"></a>
  <div class="block block-rsync white">
    <h2>rsync</h2>
    <h4>Grâce à la commande <strong><i>rsync</i></strong> vous pouvez copier des fichiers et dossiers un depuis ou vers un hôte à distance. Grâce à cela vous pouvez faire de la synchronisation de fichiers.</h4>
    <dl>
      <dt>Quelques options :</dt>
      <dd><i>-a</i>: copie de manière récursive tout en préservant les permissions et les dates des fichiers.</dd>
      <dd><i>-z</i>: compresse les données avant le transfert.</dd>
      <dd><i>-v</i>: affiche tout ce qui se passe pendant le transfert.</dd>
      <dd><i>-e</i>:</dd>
      <dd><i>--delete</i>: efface les fichiers qui n'existent pas chez l'émetteur</dd>
      <dd><i>--exclude=MOTIF</i>: exclut les fichiers correspondant au motif</dd> 
    </dl>
    <p><code>rsync sources/files destination/files</code> Synchroniser les fichiers sources vers une destination.</p>
    <p><code>rsync -azv john@remotehost.example.com:files/ destination/files</code> Synchroniser les fichiers sources vers une destination.</p>
    <p><code>rsync -azv --delete sources/files destination/files</code> Synchroniser tout les fichiers, supprime aussi les fichiers qui n'existent plus sur la sources.</p>
    <p><code>rsync -azv --exclude="dump/*.sql.gz" files/ backup/</code> Synchroniser tout sauf les fichiers .sql.gz.</p>
  </div>

  <a name="sed"></a>
  <div class="block block-sed dark">
    <h2>sed</h2>
    <h4>La commande <strong><i>sed</i></strong> est un utilitaire qui parcours un fichier texte ligne afin de leur appliquer un traitement ou un remplacement lorsque l'expression régulière est vérifiée.</h4>
    <p><code>sed 's/foo/bar/' file.txt</code> Transformer la première occurence 'foo' de chaque ligne par 'bar'.</p>
    <p><code>sed 's/\t/  /g' file.txt</code> Transformer toutes les tabulations par deux espaces.</p>
    <p><code>sed '/^#/ d' file.txt</code> Supprimer toutes les lignes commancant par #.</p>
    <p><code>sed '/^Bonjour/,/^Au revoir/d' file.txt</code> Supprimer toutes les lignes comprises entre les deux motifs.</p>
    <p><code>sed -n '/foo/p' file.txt</code> Affiche uniquement les lignes ou l'expression est trouvée.</p>     
  </div>

  <a name="grep"></a>
  <div class="block block-grep white">
    <h2>grep</h2>
    <h4>La commande <strong><i>grep</i></strong> permet de rechercher une chaîne de caractères dans un fichier.</h4>
    <dl>
      <dt>Quelques options :</dt>
      <dd><i>-v</i>: affiche les lignes ne contenant pas la chaîne.</dd>
      <dd><i>-c</i>: compte le nombre de lignes contenant la chaîne.</dd>
      <dd><i>-n</i>: retourne les lignes préfixées par leur numéro.</dd>
      <dd><i>-x</i>: ligne correspondant exactement à la chaîne.</dd>
      <dd><i>-l</i>: affiche le nom des fichiers qui contiennent la chaîne.</dd>
    </dl>
    <p><code>grep 'text' foo.txt</code> Recherche l'occurence text dans le fichier foo.txt</p>
  </div>

  <a name="find"></a>
  <div class="block block-find dark">
    <h2>find</h2>
    <h4>La commande <strong><i>find</i></strong> permet de chercher des fichiers et éventuellement d'exécuter des commandes sur ceux-ci.</h4>
    <dl>
      <dt>Quelques options :</dt>
      <dd><i>-name</i>: Recherche d'un fichier par son nom</dd>
      <dd><i>-iname</i>: Même chose que -name mais insensible à la casse</dd>
      <dd><i>-type</i>: Recherche de fichier d'un certain type</dd>
      <dd><i>-atime</i>: Recherche par date de dernier accès</dd>
      <dd><i>-mtime</i>: Recherche par date de dernière modification</dd>
      <dd><i>-user</i>: Recherche de fichiers appartenant à l'utilisateur donné</dd>
      <dd><i>-group</i>: Recherche de fichiers appartenant au groupe donné</dd>
      <dd><i>-size</i>: Recherche par rapport à une taille de fichier.</dd>
      <dd><i>-exec</i>: Exécute la commande donnée aux fichiers trouvés.</dd >
      <dd><i>-a</i>: Opérateur ET</dd>
      <dd><i>-o</i>: Opérateur OU</dd>
      <dd><i>!</i> ou <i>-not</i>: Opérateur NOT</dd>
    </dl>  
    <p><code>find myfile* -print</code><br />Rechercher un fichier commençant par "myfile"</p>
    <p><code>find -name *myfile*.txt -print</code><br /> Rechercher un fichier contenant "myfile" et ayant pour extention ".txt"</p>    
    <p><code>find /usr -type d -print</code><br /> Afficher tous les répertoires de /usr</p>
    <p><code>find $HOME \( -name '*.txt' -o -name '*.pdf' \)</code><br />Afficher tous les fichiers .txt ou .pdf dans le répertoire home de l'utilisateur.</p>
    <p><code>find $HOME -name *.txt -atime +7 -exec rm {} \;</code><br />Supprimer tous les fichiers .txt ou .pdf qui n'ont pas été accédés depuis plus de 7 jours dans le répertoire home de l'utilisateur.</p>    
    <p><code>find $HOME -name '*.txt' -size +4k -exec ls -l {} \;</code><br />Affiche la taille de tous les fichiers de plus de 2 kilos</p>
  </div>

  <a name="archives"></a>
  <div class="block block-archives white">
    <h2>Archives</h2>
    <h4>Que ce soit pour compresser ou décompresser des fichiers ou des dossiers, cela se fait avec la commande <strong><i>tar</i></strong>.</h4>
    <dl>
      <dt>Quelques options :</dt>
      <dd><i>-c</i>: créer</dd>
      <dd><i>-t</i>: tester / lister</dd>
      <dd><i>-x</i>: extraire</dd>
      <dd><i>-v</i>: description des fichiers désarchivés</dd>
      <dd><i>-j</i>: format de compression bzip2</dd>
      <dd><i>-z</i>: format de compression gzip</dd>
    </dl>
    <p><code>tar -cvf archive.tar fichier1</code> Création d’une archive nommée archive.tar contenant le fichier fichier1.</p>
    <p><code>tar -cvf archive.tar fichier1 fichier2</code> Création d’une archive contenant deux fichiers fichier1 et fichier2.</p>
    <p><code>tar -cvf archive.tar repertoire/</code> Création d’une archive a partir d’un répertoire.</p>
    <p><code>tar -czvf archive.tar.gz repertoire/</code> Création d’une archive au format tar.gz.</p>
    <p><code>tar -cjvf archive.tar.bz2 repertoire/</code> Création d’une archive au format tar.bz2.</p>
    <p><code>tar -xzvf archive.tar.gz</code> Extraction de l’archive tar.gz.</p>
    <p><code>tar -xjvf archive.tar.bz2</code> Extraction de l’archive tar.bz2.</p>
    <p><code>tar -tf mon_fichier.tar</code> Liste tous les fichiers contenus dans une archive.</p>
  </div>

  <a name="process"></a>
  <div class="block block-processus dark">
    <h2>Gestion des processus</h2>
    <p><code>top</code> Classement en live des processus en cours triés par utilisation Proc, Mem ou Temps CPU.</p>
    <p><code>free</code> Afficher la mémoire libre.</p>
    <p><code>ps aux</code> Afficher tous les processus exécutés.</p>
    <p><code>ps faux</code> Afficher tous les processus exécutés affiché sous forme.</p> 
    <p><code>kill pid</code> Arrêter un processus.</p>
    <p><code>kill ­9 pid</code> Tuer le processus.</p> 
  </div>

  <a name="Commandes-utiles"></a>
  <div class="block block-utiles">
    <h2>Commandes utiles</h2>
    <p>
    </p>
  </div>

</body>
</html>